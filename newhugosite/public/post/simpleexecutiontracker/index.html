<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Measure Code Execution Time with .NET C# | rmauro.dev {blog}</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="As a programmer, we may need to find out the execution time used by a particular segment of the C# code, in order to optimize the performance. For example, we may want to know how much time is taken for reading multiple files in the file system, or fetching data from the database, or executing some business logic.
Provides a set of methods and properties that you can use to accurately measure elapsed time.">
    <meta name="generator" content="Hugo 0.130.0">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/post/simpleexecutiontracker/">
    

    <meta property="og:url" content="http://localhost:1313/post/simpleexecutiontracker/">
  <meta property="og:site_name" content="rmauro.dev {blog}">
  <meta property="og:title" content="Measure Code Execution Time with .NET C#">
  <meta property="og:description" content="As a programmer, we may need to find out the execution time used by a particular segment of the C# code, in order to optimize the performance. For example, we may want to know how much time is taken for reading multiple files in the file system, or fetching data from the database, or executing some business logic.
Provides a set of methods and properties that you can use to accurately measure elapsed time.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2022-10-06T14:29:39+00:00">
    <meta property="article:modified_time" content="2022-10-06T14:29:39+00:00">
    <meta property="article:tag" content="C#">
    <meta property="article:tag" content=".NET 6">
    <meta property="article:tag" content="DotNet">

  <meta itemprop="name" content="Measure Code Execution Time with .NET C#">
  <meta itemprop="description" content="As a programmer, we may need to find out the execution time used by a particular segment of the C# code, in order to optimize the performance. For example, we may want to know how much time is taken for reading multiple files in the file system, or fetching data from the database, or executing some business logic.
Provides a set of methods and properties that you can use to accurately measure elapsed time.">
  <meta itemprop="datePublished" content="2022-10-06T14:29:39+00:00">
  <meta itemprop="dateModified" content="2022-10-06T14:29:39+00:00">
  <meta itemprop="wordCount" content="270">
  <meta itemprop="keywords" content="C#,.NET 6,DotNet">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Measure Code Execution Time with .NET C#">
  <meta name="twitter:description" content="As a programmer, we may need to find out the execution time used by a particular segment of the C# code, in order to optimize the performance. For example, we may want to know how much time is taken for reading multiple files in the file system, or fetching data from the database, or executing some business logic.
Provides a set of methods and properties that you can use to accurately measure elapsed time.">

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        rmauro.dev {blog}
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">Measure Code Execution Time with .NET C#</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2022-10-06T14:29:39Z">October 6, 2022</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>As a programmer, we may need to find out the execution time used by a particular segment of the C# code, in order to optimize the performance. For example, we may want to know how much time is taken for reading multiple files in the file system, or fetching data from the database, or executing some business logic.</p>
<blockquote>
<p>Provides a set of methods and properties that you can use to accurately measure elapsed time.</p>
</blockquote>
<p><em>Microsoft&rsquo;s Definition</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Diagnostics;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Stopwatch stopWatch = <span style="color:#66d9ef">new</span> Stopwatch();
</span></span><span style="display:flex;"><span>stopWatch.Start();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i = <span style="color:#ae81ff">0</span>; i &lt; <span style="color:#ae81ff">1000</span>; i++)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>   Console.Write(i);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>stopWatch.Stop();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Get the elapsed time as a TimeSpan value.</span>
</span></span><span style="display:flex;"><span>TimeSpan ts = stopWatch.Elapsed;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Format and display the TimeSpan value.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">string</span> elapsedTime = <span style="color:#66d9ef">string</span>.Format(
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;{0:00}:{1:00}:{2:00}.{3:00}&#34;</span>, 
</span></span><span style="display:flex;"><span>    ts.Hours, 
</span></span><span style="display:flex;"><span>    ts.Minutes, 
</span></span><span style="display:flex;"><span>    ts.Seconds, 
</span></span><span style="display:flex;"><span>    ts.Milliseconds / <span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>Console.WriteLine(<span style="color:#e6db74">&#34;RunTime &#34;</span> + elapsedTime);
</span></span></code></pre></div><p>C# includes the <a href="https://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx">Stopwatch</a> class in the <code>System.Diagnostics</code> namespace, which can be used to accurately measure the time taken for code execution. You don&rsquo;t need to use DateTime and calculate the time manually.</p>
<p>The following example measures the time taken for the execution of the <code>for</code> loop using StopWatch.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Diagnostics;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> MyApp.Tracing
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">sealed</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SimpleExecutionTracker</span> : IExecutionTracker
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">long</span> _startTimestamp;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">long</span> _stopTimestamp;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> StartTracking()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            _startTimestamp = Stopwatch.GetTimestamp();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> StopTracking()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            _stopTimestamp = Stopwatch.GetTimestamp();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Reset()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            StartTracking();
</span></span><span style="display:flex;"><span>            _stopTimestamp = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> SimpleExecutionTracker StartNew()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> t = <span style="color:#66d9ef">new</span> SimpleExecutionTracker();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            t.StartTracking();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> t;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> TimeSpan ElapsedTime =&gt; TimeSpan.FromMilliseconds(GetElapsedMilliseconds(_startTimestamp, _stopTimestamp));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Elapsed =&gt; GetElapsedMilliseconds(_startTimestamp, _stopTimestamp);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">double</span> GetElapsedMilliseconds(<span style="color:#66d9ef">long</span> start, <span style="color:#66d9ef">long</span> stop)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> (stop - start) * <span style="color:#ae81ff">1000</span> / (<span style="color:#66d9ef">double</span>)Stopwatch.Frequency;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul class="pa0">
  
   <li class="list di">
     <a href="/tags/C%23/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">C#</a>
   </li>
  
   <li class="list di">
     <a href="/tags/.NET-6/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">.NET 6</a>
   </li>
  
   <li class="list di">
     <a href="/tags/DotNet/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">DotNet</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/post/calculate-time-ago-with-csharp/">Calculate Time Ago with .NET C#</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/create-a-minimal-api-with-dotnet-6/">Create a Minimal API with .NET 6</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/setup-serilog-in-net6-as-logging-provider/">Set up Serilog in .NET 6 as a logging provider</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/adding-health-checks-to-net-core-application/">Health Checks on your ASP.NET Core Application</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/aspnet-health-check-for-oracle/">Health Check in .NET 6 C#</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/getting-started-with-benchmark-net-c-sharp/">Getting Started with Benchmark.Net C#</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/adding-startup-back-to-net-6-project/">Adding Startup.cs back to .NET 6 Project</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/add-build-time-to-your-csharp-assembly/">Add Build Time to your C# Assembly</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/optmizing-data-access-with-oracle-managed-ado-net/">Optimizing Query Performance on C# ODP.NET - Oracle Managed Data Access</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/health-checks-em-aplicacoes-net-5/">Health Checks em Aplicações .NET 5</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/api-key-authentication-extending-the-native-implementation/">API Key Authentication - Extending the native implementation</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/end-to-end-csharp-application-with-dotnet-5-api-and-mongo-db/">End to end C# Application with .NET 5 API and MongoDB</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/native-dependency-injection-in-azure-functions-with-csharp/">Native Dependency Injection in Azure Functions with C#</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/adding-health-checks-ui/">Adding Health Checks UI</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/enabling-http-2-on-kestrel/">Simple Web Application with HTTP 2 over Kestrel</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  rmauro.dev {blog} 2024 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
