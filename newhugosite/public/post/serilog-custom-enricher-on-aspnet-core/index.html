<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Getting Started with Serilog Custom Enrichers | rmauro.dev {blog}</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="One of the key features of Serilog is the ability to Enrich Log Events with additional contextual information that can help in troubleshooting and debugging.
In this blog post, we will explore how to create a Custom Enricher with Serilog to add custom properties to log events.">
    <meta name="generator" content="Hugo 0.130.0">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/post/serilog-custom-enricher-on-aspnet-core/">
    

    <meta property="og:url" content="http://localhost:1313/post/serilog-custom-enricher-on-aspnet-core/">
  <meta property="og:site_name" content="rmauro.dev {blog}">
  <meta property="og:title" content="Getting Started with Serilog Custom Enrichers">
  <meta property="og:description" content="One of the key features of Serilog is the ability to Enrich Log Events with additional contextual information that can help in troubleshooting and debugging.
In this blog post, we will explore how to create a Custom Enricher with Serilog to add custom properties to log events.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2023-04-04T00:05:15+00:00">
    <meta property="article:modified_time" content="2023-04-04T00:05:15+00:00">
    <meta property="article:tag" content="Serilog">
    <meta property="article:tag" content="C#">
    <meta property="article:tag" content=".NET 6">
    <meta property="article:tag" content="DotNet">

  <meta itemprop="name" content="Getting Started with Serilog Custom Enrichers">
  <meta itemprop="description" content="One of the key features of Serilog is the ability to Enrich Log Events with additional contextual information that can help in troubleshooting and debugging.
In this blog post, we will explore how to create a Custom Enricher with Serilog to add custom properties to log events.">
  <meta itemprop="datePublished" content="2023-04-04T00:05:15+00:00">
  <meta itemprop="dateModified" content="2023-04-04T00:05:15+00:00">
  <meta itemprop="wordCount" content="349">
  <meta itemprop="keywords" content="Serilog,C#,.NET 6,DotNet">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Getting Started with Serilog Custom Enrichers">
  <meta name="twitter:description" content="One of the key features of Serilog is the ability to Enrich Log Events with additional contextual information that can help in troubleshooting and debugging.
In this blog post, we will explore how to create a Custom Enricher with Serilog to add custom properties to log events.">

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        rmauro.dev {blog}
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">Getting Started with Serilog Custom Enrichers</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2023-04-04T00:05:15Z">April 4, 2023</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p><strong>Serilog</strong> is a popular logging library for <strong>.NET</strong> that provides a flexible and extensible way to log messages from applications.</p>
<p>One of the key features of Serilog is the ability to <strong>Enrich Log Events</strong> with additional contextual information that can help troubleshoot and debug.</p>
<p>In this blog post, we will explore how to create a Custom Enricher with Serilog to add custom properties to log events.</p>
<h2 id="development">Development</h2>
<p>To create a custom enricher with Serilog, we should define a class that implements the <code>ILogEventEnricher</code> interface.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">ILogEventEnricher</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> Enrich(LogEvent logEvent, ILogEventPropertyFactory propertyFactory);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Let&rsquo;s start by creating a new class called <code>AspNetCoreEnvironmentEnricher</code> that implements the <code>ILogEventEnricher</code> interface:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Serilog.Core;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Serilog.Events;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> Serilog.Labs.CustomEnrichers.Enrichers
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//class must implement interface ILogEventEnricher</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AspNetCoreEnvironmentEnricher</span> : ILogEventEnricher
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">string</span> _aspNetEnvironment;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// static constructor to load the environment variable</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">static</span> AspNetCoreEnvironmentEnricher()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            _aspNetEnvironment = Environment.GetEnvironmentVariable(<span style="color:#e6db74">&#34;ASPNETCORE_ENVIRONMENT&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Enrich(
</span></span><span style="display:flex;"><span>        	LogEvent logEvent, 
</span></span><span style="display:flex;"><span>            ILogEventPropertyFactory propertyFactory)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> enrichProperty = propertyFactory
</span></span><span style="display:flex;"><span>            	.CreateProperty(
</span></span><span style="display:flex;"><span>                	<span style="color:#e6db74">&#34;AspNetCoreEnvironment&#34;</span>, 
</span></span><span style="display:flex;"><span>                    _aspNetEnvironment);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            logEvent.AddOrUpdateProperty(enrichProperty);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The <code>Enrich</code> method is called for each log event, and we can use it to add custom properties to the <code>logEvent</code> parameter. The <code>propertyFactory</code> parameter can be used to create new properties that we can add to the log event.</p>
<h3 id="using-the-serilog-enricher">Using the Serilog Enricher</h3>
<p>Now that we have our custom enricher class, let&rsquo;s use it with Serilog. We can add it to the logger configuration like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Log.Logger = <span style="color:#66d9ef">new</span> LoggerConfiguration()
</span></span><span style="display:flex;"><span>    .Enrich.With(<span style="color:#66d9ef">new</span> AspNetCoreEnvironmentEnricher())
</span></span><span style="display:flex;"><span>    .WriteTo.Console(
</span></span><span style="display:flex;"><span>    	outputTemplate: <span style="color:#e6db74">&#34;[{AspNetCoreEnvironment} {Level:u3}] {Message:lj}{NewLine}{Exception}&#34;</span>)
</span></span><span style="display:flex;"><span>    .CreateLogger();
</span></span></code></pre></div><p>In this example, we added our custom enricher to the logger configuration using the <code>Enrich.With</code> method. We passed the current user&rsquo;s name &ldquo;Alice&rdquo; to the constructor of our enricher.</p>
<p>Now, when we log a message, the <code>UserName</code> property will be added to the log event:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Log.Information(<span style="color:#e6db74">&#34;Hello, world!&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*Will Output
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">[Information Development] Hello, world!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span></code></pre></div><h2 id="conclusion">😎Conclusion</h2>
<p>Creating a custom enricher with Serilog is a simple and powerful way to add contextual information to log events.</p>
<p>By implementing the <code>ILogEventEnricher</code> interface and using the <code>propertyFactory</code> parameter, we can add any custom properties we need to help in troubleshooting and debugging our applications.</p>
<ul class="pa0">
  
   <li class="list di">
     <a href="/tags/Serilog/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Serilog</a>
   </li>
  
   <li class="list di">
     <a href="/tags/C%23/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">C#</a>
   </li>
  
   <li class="list di">
     <a href="/tags/.NET-6/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">.NET 6</a>
   </li>
  
   <li class="list di">
     <a href="/tags/DotNet/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">DotNet</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/post/setup-serilog-in-net6-as-logging-provider/">Set up Serilog in .NET 6 as a logging provider</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/simpleexecutiontracker/">Measure Code Execution Time with .NET C#</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/calculate-time-ago-with-csharp/">Calculate Time Ago with .NET C#</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/create-a-minimal-api-with-dotnet-6/">Create a Minimal API with .NET 6</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/adding-health-checks-to-net-core-application/">Health Checks on your ASP.NET Core Application</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/getting-started-with-chat-gpt-integration-with-csharp-console-application/">Getting Started with Chat GPT integration in a .NET C# Console Application</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/aspnet-health-check-for-oracle/">Health Check in .NET 6 C#</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/getting-started-with-benchmark-net-c-sharp/">Getting Started with Benchmark.Net C#</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/adding-startup-back-to-net-6-project/">Adding Startup.cs back to .NET 6 Project</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/add-build-time-to-your-csharp-assembly/">Add Build Time to your C# Assembly</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/define-implicit-explicit-operator-csharp-tips/">Define Implicit and Explicit Operator - C# Tips</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/optmizing-data-access-with-oracle-managed-ado-net/">Optimizing Query Performance on C# ODP.NET - Oracle Managed Data Access</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/health-checks-em-aplicacoes-net-5/">Health Checks em Aplicações .NET 5</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/api-key-authentication-extending-the-native-implementation/">API Key Authentication - Extending the native implementation</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/end-to-end-csharp-application-with-dotnet-5-api-and-mongo-db/">End to end C# Application with .NET 5 API and MongoDB</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  rmauro.dev {blog} 2024 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
