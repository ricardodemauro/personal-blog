<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Health Check in .NET 6 C# | rmauro.dev {blog}</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Since the new .NET 6 we have HealthCheck methods incorporated in the framework without the need of external packages.
In this new version we no longer need to add any external packages to set up the Health Check Monitoring Pattern.
ðŸŽ‰ In this Issue Explain Health Monitoring Pattern Basic Setup .NET 6 Extras Oracle Database Check Elastic Search Check Explain Health Monitoring Pattern The Problem to be Solved How we can detect if a service is running or unable to receive/handle requests?">
    <meta name="generator" content="Hugo 0.130.0">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/post/aspnet-health-check-for-oracle/">
    

    <meta property="og:url" content="http://localhost:1313/post/aspnet-health-check-for-oracle/">
  <meta property="og:site_name" content="rmauro.dev {blog}">
  <meta property="og:title" content="Health Check in .NET 6 C#">
  <meta property="og:description" content="Since the new .NET 6 we have HealthCheck methods incorporated in the framework without the need of external packages.
In this new version we no longer need to add any external packages to set up the Health Check Monitoring Pattern.
ðŸŽ‰ In this Issue Explain Health Monitoring Pattern Basic Setup .NET 6 Extras Oracle Database Check Elastic Search Check Explain Health Monitoring Pattern The Problem to be Solved How we can detect if a service is running or unable to receive/handle requests?">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2022-10-03T16:22:14+00:00">
    <meta property="article:modified_time" content="2022-10-03T16:22:14+00:00">
    <meta property="article:tag" content="HealthCheck">
    <meta property="article:tag" content=".NET 6">
    <meta property="article:tag" content="C#">
    <meta property="article:tag" content="Design Patterns">

  <meta itemprop="name" content="Health Check in .NET 6 C#">
  <meta itemprop="description" content="Since the new .NET 6 we have HealthCheck methods incorporated in the framework without the need of external packages.
In this new version we no longer need to add any external packages to set up the Health Check Monitoring Pattern.
ðŸŽ‰ In this Issue Explain Health Monitoring Pattern Basic Setup .NET 6 Extras Oracle Database Check Elastic Search Check Explain Health Monitoring Pattern The Problem to be Solved How we can detect if a service is running or unable to receive/handle requests?">
  <meta itemprop="datePublished" content="2022-10-03T16:22:14+00:00">
  <meta itemprop="dateModified" content="2022-10-03T16:22:14+00:00">
  <meta itemprop="wordCount" content="368">
  <meta itemprop="keywords" content="HealthCheck,.NET 6,C#,Design Patterns">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Health Check in .NET 6 C#">
  <meta name="twitter:description" content="Since the new .NET 6 we have HealthCheck methods incorporated in the framework without the need of external packages.
In this new version we no longer need to add any external packages to set up the Health Check Monitoring Pattern.
ðŸŽ‰ In this Issue Explain Health Monitoring Pattern Basic Setup .NET 6 Extras Oracle Database Check Elastic Search Check Explain Health Monitoring Pattern The Problem to be Solved How we can detect if a service is running or unable to receive/handle requests?">

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        rmauro.dev {blog}
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">Health Check in .NET 6 C#</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2022-10-03T16:22:14Z">October 3, 2022</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>Since the new .NET 6 we have <strong>HealthCheck</strong> methods incorporated in the framework without the need of external packages.</p>
<p>In this new version we no longer need to add any external packages to set up the Health Check Monitoring Pattern.</p>
<h2 id="-in-this-issue">ðŸŽ‰ In this Issue</h2>
<ul>
<li>Explain Health Monitoring Pattern</li>
<li>Basic Setup .NET 6</li>
<li>Extras</li>
<li>Oracle Database Check</li>
<li>Elastic Search Check</li>
</ul>
<h2 id="explain-health-monitoring-pattern">Explain Health Monitoring Pattern</h2>
<h3 id="the-problem-to-be-solved">The Problem to be Solved</h3>
<p>How we can detect if a service is running or unable to receive/handle requests?</p>
<h2 id="solution">Solution</h2>
<p>The service should expose an Health Check API endpoint (e.g. HTTP <code>/health</code>) that returns the health of the service. The API endpoint handler performs various checks, such as</p>
<ul>
<li>the status of the connections to the infrastructure services used by the service instance</li>
<li>the status of the host, e.g. disk space</li>
<li>application specific logic</li>
</ul>
<p>Health checks are exposed by an app as HTTP endpoints. Health check endpoints can be configured for various real-time monitoring scenarios:</p>
<ul>
<li>Health probes can be used by container orchestrators and load balancers to check an app&rsquo;s status. For example, a container orchestrator may respond to a failing health check by halting a rolling deployment or restarting a container. A load balancer might react to an unhealthy app by routing traffic away from the failing instance to a healthy instance.</li>
<li>Use of memory, disk, and other physical server resources can be monitored for healthy status.</li>
<li>Health checks can test an app&rsquo;s dependencies, such as databases and external service endpoints, to confirm availability and normal functioning.</li>
</ul>
<p>Health checks are typically used with an external monitoring service or container orchestrator to check the status of an app. Before adding health checks to an app, decide on which monitoring system to use. The monitoring system dictates what types of health checks to create and how to configure their endpoints.</p>
<p><code>Health Check</code> in C# <strong><strong>.NET</strong></strong> is very simple. With just a few lines of code, you can set up everything to monitor the <strong><strong>Health of our Application</strong></strong>.</p>
<figure><img src="http://res-4.cloudinary.com/dgoa5llvh/image/upload/q_auto/HealthCheck.drawio.png"
    alt="Monitoring Pattern"><figcaption>
      <p>Monitoring Pattern</p>
    </figcaption>
</figure>

<h2 id="basic-set-up">Basic Set Up</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> builder = WebApplication.CreateBuilder(args);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>builder.Services.AddHealthChecks();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> app = builder.Build();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app.MapHealthChecks(<span style="color:#e6db74">&#34;/healthz&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app.Run();
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">string</span> connString = <span style="color:#e6db74">&#34;CONNECTION_STRING_HERE&#34;</span>;
</span></span><span style="display:flex;"><span>services.AddOracle(
</span></span><span style="display:flex;"><span>	connectionString: connString,
</span></span><span style="display:flex;"><span>    healthQuery: <span style="color:#e6db74">&#34;SELECT 1 FROM DUAL&#34;</span>,
</span></span><span style="display:flex;"><span>    name: <span style="color:#e6db74">&#34;ORA&#34;</span>,
</span></span><span style="display:flex;"><span>    failureStatus: HealthStatus.Unhealthy,
</span></span><span style="display:flex;"><span>    tags: <span style="color:#66d9ef">new</span>[] { <span style="color:#e6db74">&#34;db&#34;</span>, <span style="color:#e6db74">&#34;sql&#34;</span>, <span style="color:#e6db74">&#34;oracle&#34;</span> }
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><ul class="pa0">
  
   <li class="list di">
     <a href="/tags/HealthCheck/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">HealthCheck</a>
   </li>
  
   <li class="list di">
     <a href="/tags/.NET-6/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">.NET 6</a>
   </li>
  
   <li class="list di">
     <a href="/tags/C%23/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">C#</a>
   </li>
  
   <li class="list di">
     <a href="/tags/Design-Patterns/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Design Patterns</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/post/adding-health-checks-to-net-core-application/">Health Checks on your ASP.NET Core Application</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/calculate-time-ago-with-csharp/">Calculate Time Ago with .NET C#</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/create-a-minimal-api-with-dotnet-6/">Create a Minimal API with .NET 6</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/setup-serilog-in-net6-as-logging-provider/">Set up Serilog in .NET 6 as a logging provider</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/adding-startup-back-to-net-6-project/">Adding Startup.cs back to .NET 6 Project</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/health-checks-em-aplicacoes-net-5/">Health Checks em AplicaÃ§Ãµes .NET 5</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/adding-health-checks-ui/">Adding Health Checks UI</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/getting-started-with-benchmark-net-c-sharp/">Getting Started with Benchmark.Net C#</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/optmizing-data-access-with-oracle-managed-ado-net/">Optimizing Query Performance on C# ODP.NET - Oracle Managed Data Access</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/add-build-time-to-your-csharp-assembly/">Add Build Time to your C# Assembly</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/api-key-authentication-extending-the-native-implementation/">API Key Authentication - Extending the native implementation</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/end-to-end-csharp-application-with-dotnet-5-api-and-mongo-db/">End to end C# Application with .NET 5 API and MongoDB</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/native-dependency-injection-in-azure-functions-with-csharp/">Native Dependency Injection in Azure Functions with C#</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/enabling-http-2-on-kestrel/">Simple Web Application with HTTP 2 over Kestrel</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/compress-zip-files-in-memory-using-csharp/">Compress files in memory (.zip) using C#</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  rmauro.dev {blog} 2024 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
